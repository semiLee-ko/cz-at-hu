/* Schedule Editor & Forms */

.editor-container {
    background: var(--bg-secondary);
    min-height: 100vh;
}

.editor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px;
    border-bottom: 1px solid var(--border);
    background: var(--bg-secondary);
}

.editor-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--text-primary);
}

.schedule-form {
    /* Bottom padding increased for fixed nav */
    max-width: 600px;
    margin: 0 auto;
    box-sizing: border-box;
}

.btn-icon {
    border: none;
    outline: none;
    background: none;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.form-group {
    margin-bottom: 16px;
}

.form-group label {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: 6px;
    position: relative;
    padding-left: 12px;
}

.form-group label::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 4px;
    background: var(--secondary-dark);
    border-radius: 50%;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 0.85rem;
    font-family: inherit;
    transition: border-color 0.2s;
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--secondary-dark);
    box-shadow: 0 0 0 2px rgba(69, 184, 175, 0.1);
}

.input-error {
    background-color: #fff5f5 !important;
    border-color: #ff6b6b !important;
}

/* ========== Date Input Enhancement ========== */
.date-input-wrapper {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
}

.date-input-wrapper .calendar-icon {
    position: absolute;
    right: 12px;
    color: #9ca3af;
    pointer-events: none;
    z-index: 1;
}

.date-input {
    padding: 10px 12px !important;
    padding-right: 40px !important;
    font-size: 0.85rem !important;
    cursor: pointer;
    line-height: 35px;
    /* Match height for vertical center */
    min-height: 35px;
    height: 35px;
    margin: 0;
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    -webkit-appearance: none;
    appearance: none;
    border: 1px solid var(--border) !important;
    border-radius: 4px !important;
    box-sizing: border-box;
}

.date-input:focus {
    border-color: var(--secondary-dark) !important;
    box-shadow: 0 0 0 2px rgba(69, 184, 175, 0.1);
    outline: none;
}

/* Hide default calendar picker icon but keep it clickable across input */
.date-input::-webkit-calendar-picker-indicator {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
    background: transparent;
    color: transparent;
}

.date-input::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
}

.date-input::-webkit-datetime-edit-text {
    padding: 0 1px;
}

.date-input::-webkit-datetime-edit-month-field,
.date-input::-webkit-datetime-edit-day-field,
.date-input::-webkit-datetime-edit-year-field {
    padding: 1px 2px;
    border-radius: 4px;
    text-align: center;
}

.date-input::-webkit-datetime-edit-month-field:focus,
.date-input::-webkit-datetime-edit-day-field:focus,
.date-input::-webkit-datetime-edit-year-field:focus {
    background: var(--secondary);
    color: white;
}

.form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.hint {
    font-size: 0.7rem;
    color: var(--text-secondary);
    margin-top: 0;
    display: inline;
    margin-left: 6px;
    font-weight: 400;
    text-transform: none;
    letter-spacing: normal;
}

/* ========== Trip Type Selector ========== */
.trip-type-selector {
    display: flex;
    gap: 12px;
}

.radio-option {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 16px;
    padding: 10px 16px;
    border: 1px solid var(--border);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    background: var(--bg-secondary);
    color: var(--text-primary);
    position: relative;
}

.radio-option:hover {
    border-color: var(--secondary-dark);
    background: var(--bg-primary);
}

.radio-option input[type="radio"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

.radio-option span {
    font-size: 0.85rem;
    font-weight: 600;
    transition: color 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
}

/* Remove bullet from radio button labels */
.radio-option::before {
    display: none;
}

/* Custom checkmark */
.radio-option span::before {
    content: '';
    width: 16px;
    height: 16px;
    border: 1px solid var(--border);
    border-radius: 50%;
    display: inline-block;
    transition: all 0.2s;
    flex-shrink: 0;
}

.radio-option input[type="radio"]:checked+span {
    color: var(--secondary-dark);
    font-weight: 600;
}

.radio-option input[type="radio"]:checked+span::before {
    border-color: var(--secondary-dark);
    background: var(--secondary-dark);
    box-shadow: inset 0 0 0 3px white;
}

.radio-option:has(input[type="radio"]:checked) {
    border-color: var(--secondary-dark);
    background: #e6f7f6;
}

[data-theme="dark"] .radio-option:has(input[type="radio"]:checked) {
    background: #266768;
    border-color: #475569;
    color: white;
}

[data-theme="dark"] .radio-option input[type="radio"]:checked+span {
    color: white;
}

[data-theme="dark"] .radio-option input[type="radio"]:checked+span::before {
    border-color: white;
    background: white;
    box-shadow: inset 0 0 0 3px #334155;
}

.day-item {
    background: var(--bg-primary);
    padding: 20px;
    border-radius: var(--radius-md);
    margin-bottom: 16px;
    border: 2px solid var(--border);
}

.day-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.day-item-header strong {
    color: var(--text-primary);
    font-size: 1rem;
}

[data-theme="dark"] .day-item {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .day-item-header strong {
    color: var(--text-primary);
}

.day-item input,
.day-item textarea {
    width: 100%;
    padding: 12px;
    border: 2px solid var(--border);
    border-radius: var(--radius-sm);
    margin-bottom: 12px;
    font-size: 0.9rem;
    font-family: inherit;
    transition: var(--transition);
}

.day-item input:focus,
.day-item textarea:focus {
    outline: none;
    border-color: var(--secondary);
}

[data-theme="dark"] .day-item input,
[data-theme="dark"] .day-item textarea {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .day-item input:focus,
[data-theme="dark"] .day-item textarea:focus {
    border-color: var(--secondary-dark);
}

/* ========== Tags System ========== */
.tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 8px;
    min-height: 36px;
    padding: 6px;
    margin-bottom: 8px;
    min-height: 36px;
    padding: 6px;
    border: 1px dashed var(--border);
    border-radius: 4px;
    background: var(--bg-secondary);
}

.tag-item {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(135deg, var(--secondary-dark), #3da89f);
    color: white;
    padding: 5px 10px;
    border-radius: 16px;
    font-size: 0.75rem;
    font-weight: 600;
    animation: tagAppear 0.2s ease;
}

/* Location tags - Same as default (Mint) */

@keyframes tagAppear {
    from {
        opacity: 0;
        transform: scale(0.8);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.tag-remove {
    background: rgba(255, 255, 255, 0.3);
    border: none;
    color: white;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 14px;
    line-height: 1;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
}

.tag-remove:hover {
    background: rgba(255, 255, 255, 0.5);
    transform: scale(1.1);
}

.tag-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 0.85rem;
    font-family: inherit;
    transition: border-color 0.2s;
    background: var(--bg-secondary);
    color: var(--text-primary);
}

.tag-input:focus {
    outline: none;
    border-color: var(--secondary-dark);
    box-shadow: 0 0 0 2px rgba(69, 184, 175, 0.1);
}

/* Select styling to match compact design */
.form-group select {
    width: 100%;
    height: 35px;
    padding: 0 35px 0 12px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-size: 0.85rem;
    font-family: inherit;
    transition: border-color 0.2s;
    background: white;
    cursor: pointer;
    -webkit-appearance: none;
    appearance: none;
    /* Custom Arrow SVG */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 10px center;
    background-size: 16px;
    line-height: normal;
    /* Use padding for vertical centering */
}

[data-theme="dark"] .form-group select {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    border-color: var(--border);
}

.form-group select:focus {
    outline: none;
    border-color: var(--secondary-dark);
    box-shadow: 0 0 0 2px rgba(69, 184, 175, 0.1);
}

.error-message {
    color: #ff6b6b;
    font-size: 0.8rem;
    margin-top: 4px;
    min-height: 1.2em;
    /* Prevent layout jump */
    display: none;
    /* Hidden by default */
}

.error-message.visible {
    display: block;
}

/* Error State for Inputs */
.input-error {
    border-color: #ff6b6b !important;
}

[data-theme="dark"] .input-error {
    background-color: #450a0a !important;
    /* Dark Red */
    border-color: #ff6b6b !important;
    color: white !important;
}

/* Accordion Arrow Fix */
/* Default (Expanded): Point UP (Native Icon is Up) */
.day-header .collapse-icon {
    transition: transform 0.3s ease;
    transform: rotate(180deg);
}

/* Collapsed: Point DOWN */
.day-card.collapsed .day-header .collapse-icon {
    transform: rotate(0deg);
}

/* ========================================= */
/* Professional Boarding Pass Design */
/* ========================================= */

.day-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: 6px;
    margin-bottom: 30px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    overflow: visible;
    transition: box-shadow 0.2s ease;
}

.day-card:hover {
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12);
}

.day-header {
    background: #1e40af;
    color: white;
    padding: 10px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 700;
    border-top-left-radius: 6px;
    border-top-right-radius: 6px;
}

.day-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.day-badge {
    background: rgba(255, 255, 255, 0.25);
    color: white;
    padding: 3px 8px;
    border-radius: 3px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.day-date {
    font-size: 0.85rem;
    font-weight: 600;
    color: white;
}

.collapse-icon {
    opacity: 0.9;
}

.events-list {
    background: var(--bg-secondary);
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

.event-item {
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
}

.event-item:last-child {
    border-bottom: none;
}

.event-item label {
    display: block;
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
    font-weight: 600;
    margin-bottom: 4px;
}

.event-item input,
.event-item textarea {
    width: 100%;
    padding: 6px 10px;
    font-size: 0.85rem;
    border: 1px solid var(--border);
    border-radius: 4px;
    font-family: inherit;
    transition: border-color 0.2s;
    background: var(--bg-secondary);
    color: var(--text-primary);
    height: 35px;
}

[data-theme="dark"] .event-item input,
[data-theme="dark"] .event-item textarea {
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border);
    height: 35px;
}

[data-theme="dark"] .event-item {
    background: var(--bg-secondary) !important;
    border-color: var(--border);
}

[data-theme="dark"] .day-card {
    background: var(--bg-secondary) !important;
    border-color: var(--border);
}

[data-theme="dark"] .event-header,
[data-theme="dark"] .day-header {
    background: var(--bg-secondary) !important;
    color: var(--text-primary);
}

[data-theme="dark"] .event-header span,
[data-theme="dark"] .day-info {
    color: var(--text-primary);
}

[data-theme="dark"] .btn-pick-location {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .btn-pick-location.active {
    background: var(--bg-secondary);
    /* Keep background black */
    border-color: var(--border);
    color: #ef4444;
    /* Only icon color changes */
}

/* Fill SVG paths when active */
.btn-pick-location.active svg path {
    fill: #ef4444;
    /* Fill pin body with red */
    stroke: none;
}

/* Default (Light Mode): Inner circle is WHITE */
.btn-pick-location.active svg circle {
    fill: white;
    stroke: none;
}

/* Dark Mode: Inner circle is BLACK */
[data-theme="dark"] .btn-pick-location.active svg circle {
    fill: var(--bg-secondary);
    stroke: none;
}

/* Ensure default state is stroked */
.btn-pick-location svg path,
.btn-pick-location svg circle {
    fill: none;
    stroke: currentColor;
}

[data-theme="dark"] .checkbox-label {
    background-color: #334155;
    /* Dark Gray BG */
    border-color: #475569;
    color: white;
    /* White Text */
}

[data-theme="dark"] .checkbox-label:hover {
    background-color: #475569;
}

[data-theme="dark"] .location-checkboxes input[type="checkbox"] {
    accent-color: black;
    /* Black Checkbox when checked */
    /* Note: Unchecked color is browser dependent, can't easily force black without custom appearance */
    filter: invert(1) hue-rotate(180deg);
    /* Hack to try making it look darker */
}


[data-theme="dark"] .event-item {
    border-bottom: 1px dashed var(--border);
    position: relative;
    /* Punching Effect Mask */
    --mask: radial-gradient(circle at left, transparent 6px, black 6.5px) left,
        radial-gradient(circle at right, transparent 6px, black 6.5px) right;
    --mask-size: 51% 100%;

    /* We can't apply mask directly to .event-item as it clips content. 
       We add a pseudo element for the border line if we want "holes".
       But user said "punching inner color". 
       Let's assume they want the HOLE to be dark gray. 
       This implies the background BEHIND the hole is visible.
       
       Simpler approach: Add semi-circles on the sides.
    */
}

/* Add Punching Holes */
/* Punching Holes Removed */
[data-theme="dark"] .event-item::after,
[data-theme="dark"] .event-item::before {
    display: none;
}


[data-theme="dark"] .event-item {
    border-bottom: 1px dashed var(--border);
}

[data-theme="dark"] .event-header {
    border-bottom: 1px dashed var(--border);
}

.event-item input:focus,
.event-item textarea:focus {
    outline: none;
    border-color: #1e40af;
    box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.1);
}

.event-start-time,
.event-end-time,
.event-description {
    margin-bottom: 8px;
}

/* Event Location Picker Alignment */
.event-place {
    height: 35px;
    /* Force height to match button */
    padding: 0 10px !important;
    /* Adjust padding for fixed height */
}

.btn-pick-location {
    width: 35px;
    height: 35px;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    /* Match input radius */
    background: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    transition: all 0.2s;
    color: #6b7280;
    flex-shrink: 0;
}

.btn-pick-location:hover {
    background: #f9fafb;
    border-color: var(--secondary-dark);
    color: var(--secondary-dark);
}

.btn-pick-location svg {
    stroke: currentColor;
    /* Override strict color if possible, or reliance on JS removal */
}

.btn-pick-location.active {
    border-color: #ff6b6b;
    color: #ff6b6b;
    background: #fff5f5;
}

.btn-pick-location.active:hover {
    background: #ffe3e3;
    border-color: #fa5252;
    color: #fa5252;
}

.btn-add-event {
    width: 100%;
    padding: 10px;
    background: var(--bg-primary);
    border: 1px dashed var(--border);
    border-radius: 0 0 6px 6px;
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-add-event:hover {
    background: #f3f4f6;
    border-color: #1e40af;
    color: #1e40af;
}

.day-card.collapsed:not(.tip-card) .events-list,
.day-card.collapsed:not(.tip-card) .btn-add-event {
    display: none;
}

.no-events {
    padding: 16px;
    text-align: center;
    color: #9ca3af;
    font-size: 0.85rem;
    font-style: italic;
}

/* Location Checkboxes - Compact */
.location-checkboxes {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 8px;
}

.location-checkboxes label {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: #f3f4f6;
    border: 1px solid #e5e7eb;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    text-transform: none;
    letter-spacing: normal;
    color: #4b5563;
}

.location-checkboxes label:hover {
    background: #e5e7eb;
}

.location-checkboxes input[type="checkbox"] {
    width: auto;
    margin: 0;
    cursor: pointer;
}


/* Tip Accordion Styles (Align with Day Card) */
.tip-content-wrapper {
    display: grid;
    grid-template-rows: 1fr;
    transition: grid-template-rows 0.3s ease-out;
    background: white;
}

/* Animation Support: Inner Wrapper */
.tip-content-inner {
    overflow: hidden;
    min-height: 0;
    position: relative;
    /* Context for absolute delete button */
}

/* Expanded State - Explicit */
.day-card.tip-card:not(.collapsed) .tip-content-wrapper {
    display: grid !important;
    grid-template-rows: 1fr !important;
}

/* Collapsed State for Tips (Override default display:none with animation) */
.day-card.tip-card.collapsed .tip-content-wrapper {
    display: grid !important;
    grid-template-rows: 0fr !important;
}

.tip-body {
    padding: 16px;
    border-bottom: 1px solid #f3f4f6;
}

.tip-body p {
    margin: 0;
    white-space: pre-wrap;
    color: #4b5563;
    font-size: 0.9rem;
    line-height: 1.5;
}

.tip-footer {
    padding: 12px 16px;
    background: #f9fafb;
    display: flex;
    justify-content: flex-end;
    gap: 8px;
}

.btn-edit-tip,
.btn-delete-tip {
    font-size: 0.8rem;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-edit-tip {
    background: white;
    border: 1px solid #d1d5db;
    color: #374151;
}

.btn-edit-tip:hover {
    background: #f3f4f6;
    border-color: #9ca3af;
}

.btn-delete-tip {
    background: white;
    border: 1px solid #fee2e2;
    color: #ef4444;
}

.btn-delete-tip:hover {
    background: #fef2f2;
    border-color: #fca5a5;
}

/* Drag & Drop Styles */
.day-card.dragging {
    opacity: 0.5;
    background: #f9fafb;
    pointer-events: none;
}

/* Tip Header Specific Layout Fixes */
.tip-card .day-header {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    /* Override space-between */
    gap: 12px !important;
}

.tip-card .day-info {
    flex: 1 !important;
    /* Fill remaining space */
    text-align: left !important;
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    min-width: 0 !important;
    /* Prevent flex overflow */
}

.tip-card .collapse-icon {
    margin-left: auto !important;
    /* Push to right */
    flex-shrink: 0 !important;
}

.drag-handle {
    cursor: grab;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255, 255, 255, 0.7);
    flex-shrink: 0;
    z-index: 10;
    /* Ensure clickable */
}

.drag-handle:hover {
    color: white;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

.drag-handle:active {
    cursor: grabbing;
}

.tip-form-section {
    transition: all 0.2s ease;
    border: 2px solid transparent;
    border-radius: 8px;
}

.tip-form-section.drag-over {
    border-color: var(--secondary-dark);
    background-color: rgba(69, 184, 175, 0.05);
    box-shadow: 0 0 0 4px rgba(69, 184, 175, 0.1);
}

.sortable-placeholder {
    pointer-events: none;
}

/* Tip Form Enhancements */
.tip-form-section {
    position: relative;
    /* For absolute positioning of X button */
}

.btn-close-edit {
    position: absolute;
    top: 10px;
    right: 10px;
    background: white;
    border: 1px solid #e5e7eb;
    color: #9ca3af;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    padding: 0;
    z-index: 5;
}

.btn-close-edit:hover {
    background: #fee2e2;
    border-color: #fca5a5;
    color: #ef4444;
}

.tip-guide-text {
    margin-top: 16px;
    padding: 12px 16px;
    background: #f0fdfa;
    /* Light mint bg */
    border: 1px dashed var(--secondary-dark);
    border-radius: 6px;
    font-size: 0.85rem;
    color: #2c7a7b;
    /* Dark mint text */
    display: flex;
    align-items: center;
    gap: 8px;
    line-height: 1.5;
}


.guide-icon {
    display: flex;
    align-items: center;
    color: var(--secondary-dark);
    flex-shrink: 0;
}

/* Force Left Alignment for Tip Titles - Aggressive Overrides */
.tip-card .day-header {
    justify-content: flex-start !important;
}

/* Tip Card List Styling (No Margins) */
.tip-card {
    margin-bottom: 0 !important;
    border-radius: 0 !important;
    border-bottom: none !important;
}

.tip-card:first-child {
    border-top-left-radius: 6px !important;
    border-top-right-radius: 6px !important;
}

.tip-card:last-child {
    border-bottom-left-radius: 6px !important;
    border-bottom-right-radius: 6px !important;
    border-bottom: 1px solid #e5e7eb !important;
}

/* Delete Icon Styling */
.btn-delete-tip-icon {
    position: absolute;
    bottom: 12px;
    right: 12px;
    background: none;
    border: none;
    cursor: pointer;
    color: #9ca3af;
    padding: 6px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    z-index: 5;
}

.btn-delete-tip-icon:hover {
    color: #ef4444;
    background: #fee2e2;
}

.tip-content-wrapper {
    position: relative;
    /* Context for absolute delete button */
}

.tip-card .day-info {
    flex-grow: 1 !important;
    justify-content: flex-start !important;
    text-align: left !important;
    margin-right: auto !important;
    width: auto !important;
}

.tip-card .day-date {
    text-align: left !important;
    margin-left: 0 !important;
    margin-right: auto !important;
    flex: 0 1 auto !important;
    /* Allow shrinking but not forced growing */
}

/* --- Editor Steps 3, 4, 5 Dark ModeOverrides (Tips, Accommodation, Checklist) --- */

[data-theme="dark"] .tip-form-section {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
}

[data-theme="dark"] .tip-form-section h4 {
    color: var(--text-primary);
}

[data-theme="dark"] .tip-form-section input,
[data-theme="dark"] .tip-form-section textarea,
[data-theme="dark"] .tip-form-section select {
    background-color: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border);
}

[data-theme="dark"] .tip-form-section input:focus,
[data-theme="dark"] .tip-form-section textarea:focus {
    border-color: var(--secondary);
}

/* Step 4 Category Type Buttons */
[data-theme="dark"] .category-type-selector {
    background-color: #212121;
    border: 1px solid #373737;
    border-radius: 6px;
    /* Ensure rounded corners */
    padding: 4px;
    /* Add some padding for the buttons inside */
}

[data-theme="dark"] .btn-type-select {
    background-color: transparent;
    color: var(--text-secondary);
    border: none;
}

[data-theme="dark"] .btn-type-select.active {
    background-color: var(--secondary-dark);
    color: white;
    border-color: var(--secondary-dark);
}

/* Guide Text Sections */
[data-theme="dark"] .tip-guide-text {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

/* Ensure list items content is readable */
[data-theme="dark"] .tip-list .day-card {
    background-color: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .tip-list .day-card h4 {
    color: var(--text-primary);
}

[data-theme="dark"] .tip-list .day-card p,
[data-theme="dark"] .tip-list .day-card span {
    color: var(--text-secondary);
}

/* Expanded Content Area */
[data-theme="dark"] .tip-content-wrapper {
    background-color: var(--bg-secondary);
    /* Match card background */
    border-top: 1px dashed #373737;
}

/* Step 4 Checklist Items */
[data-theme="dark"] .checklist-item-row {
    border-bottom: 1px solid #333;
}

[data-theme="dark"] .item-text {
    color: var(--text-primary);
}

/* Step 4 Inner Input (Add Item) */
[data-theme="dark"] .add-item-inner-form {
    background-color: #373737;
    /* Dark Gray Container */
    padding: 8px;
    border-radius: 6px;
    margin-top: 8px;
}

[data-theme="dark"] .inner-item-input {
    background-color: var(--bg-primary) !important;
    /* Black default */
    color: var(--text-primary) !important;
    border: 1px solid var(--border);
}

[data-theme="dark"] .inner-item-input::placeholder {
    color: #64748b;
}

[data-theme="dark"] .inner-item-input:focus {
    background-color: black !important;
    /* Force Black on focus */
    color: white !important;
    border-color: var(--secondary);
}

/* Priority Dropdown */
[data-theme="dark"] .priority-dropdown {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--border);
}

/* Tip Body Text */
[data-theme="dark"] .tip-body p {
    color: var(--text-secondary);
}

/* Accommodation Details */
[data-theme="dark"] .acc-detail-item span,
[data-theme="dark"] .acc-detail-item a {
    color: var(--text-secondary);
}

[data-theme="dark"] .acc-detail-item svg {
    color: var(--text-secondary);
}

/* User Requested Overrides: Accommodation Expanded Area */

/* Assign Dates Button */
[data-theme="dark"] .btn-assign-dates-compact {
    background-color: #334155;
    /* Dark Gray */
    color: white;
    border-color: #475569;
}

[data-theme="dark"] .btn-assign-dates-compact:hover {
    background-color: #475569;
}

/* Notes Display Area */
[data-theme="dark"] .acc-notes-display {
    background-color: #282828;
    /* Dark Gray */
    color: white;
    border-color: #3b3b3b;
    border-left: 3px solid #64748b;
}

/* Date Selection Modal Checkbox Area */
[data-theme="dark"] .date-modal-content {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border);
}

[data-theme="dark"] .date-modal-header h3 {
    color: var(--text-primary);
}

[data-theme="dark"] .date-checkboxes {
    background-color: #334155;
    /* Dark Gray */
    border-color: #475569;
}

[data-theme="dark"] .date-checkbox-label {
    background-color: #334155;
    /* Match container */
    border-color: #475569;
    /* Separator lines */
    color: white;
}

[data-theme="dark"] .date-checkbox-text {
    color: white;
}

[data-theme="dark"] .date-checkbox-label.disabled .date-checkbox-text {
    color: #94a3b8;
    /* Dim text for disabled */
}

[data-theme="dark"] .date-checkbox-label:hover {
    background-color: #475569;
}

/* Disabled State for Circular Add Buttons */
.btn-add-tip-circular:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: #e2e8f0 !important;
    color: #94a3b8 !important;
    pointer-events: none;
}

[data-theme="dark"] .btn-add-tip-circular:disabled {
    background-color: #334155 !important;
    color: #64748b !important;
}